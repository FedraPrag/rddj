$(function(){function a(a){return"#"+b(a)}function b(a){return a.toLowerCase().replace(/ /g,"-")}function c(a){f=d3.nest().key(function(a){return a.chapter}).entries(a)}function d(){var c=d3.select("#content").selectAll("section").data(f,function(a,b){return a.key});c.enter().append("section").attr("id",function(a,c){return b(a.key)}).append("h1").append("a").attr("href",function(b,c){return a(b.key)}).attr("aria-hidden",!0).attr("class","anchor").text("#"),c.select("h1").append("span").text(function(a){return a.key});var d=c.selectAll("article").data(function(a){return a.values},function(a,b){return a.title}),e=d.enter().append("article");e.append("h1").html(function(a){return'<a href="'+a.permalink+'">'+a.title+"</a>"}),e.append("div").attr("class","description").html(function(a){return a.description});var g=e.append("div").attr("class","info"),h=g.selectAll("span").data(function(a){return d3.entries(a.info)}),g=h.enter().append("span").attr("class",function(a,b){return a.key}).html(function(a,b){var c=null;switch(a.key){case"authors":c="user";break;case"type":c="file-o";break;case"time":c="clock-o";break;case"level":c="book"}var d=a.value;if("authors"===a.key){var e=d.map(function(a,b){return a.url?'<a href="'+a.url+'" target="_blank">'+a.name+"</a>":a.name});d=e.join(", ")}return'<i class="fa fa-'+c+'" title="'+a.key+'"></i>'+d});d3.select("#content").selectAll("section").append("a").attr("href","#toc").html('<i class="fa fa-angle-up"></i> Back to top.')}function e(){d3.select("#toc").append("ul");var b=d3.select("#toc ul").selectAll("li").data(f.map(function(a){return a.key}));b.enter().append("li").append("a").attr("href",function(b,c){return a(b)}).text(function(a,b){return a})}var f=null;d3.json("content/content.json",function(a,b){return a?console.warn(a):(c(b),d(),void e())})});